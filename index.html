<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>Warrior 2026 | Ultimate Masterpiece</title>
    
    <!-- PWA Connection -->
    <link rel="manifest" href="manifest.json">
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('sw.js').then(reg => console.log('Warrior OS: Active'));
        });
      }
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;900&family=Inter:wght@400;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --warrior-red: #ff3131; --bg-black: #000000; --glass: rgba(255, 255, 255, 0.03); }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body, html { 
            font-family: 'Inter', sans-serif; background-color: var(--bg-black); color: white; 
            margin: 0; padding: 0; height: 100vh; overflow-x: hidden;
            padding-top: env(safe-area-inset-top);
        }

        .container { padding: 20px; text-align: center; }

        /* --- UI COMPONENTS --- */
        .glass-card { background: var(--glass); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.05); border-radius: 25px; padding: 25px; margin-bottom: 20px; }
        .title { font-family: 'Lexend'; font-weight: 900; background: linear-gradient(90deg, #ff3131, #8b0000); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 2px; }
        .streak-num { font-size: 65px; font-weight: 900; color: var(--warrior-red); text-shadow: 0 0 30px rgba(255, 49, 49, 0.4); margin: 5px 0; }

        /* --- PERFORMANCE CARD --- */
        .performance-card { background: white; color: black; border-radius: 28px; padding: 25px; margin-bottom: 25px; text-align: center; box-shadow: 0 15px 35px rgba(255,49,49,0.2); }
        .perf-title { font-size: 10px; color: #888; font-weight: 800; letter-spacing: 2px; }
        .perf-month { font-size: 32px; font-weight: 900; margin: 5px 0; font-family: 'Lexend'; }
        .perf-stats { font-size: 18px; font-weight: 900; margin: 10px 0; }

        /* --- BUTTONS --- */
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .action-btn { border: none; padding: 18px; border-radius: 20px; font-weight: 900; font-size: 13px; text-transform: uppercase; cursor: pointer; transition: 0.3s; }
        .victory { background: #1DB954; color: black; }
        .relapse { background: #111; color: var(--warrior-red); border: 1px solid #222; }
        .panic-btn { background: var(--warrior-red); color: white; width: 100%; padding: 18px; border-radius: 50px; font-weight: 900; margin-bottom: 20px; border: none; }

        /* --- MENU & SIDEBAR --- */
        .header-nav { display: flex; justify-content: space-between; align-items: center; padding: 20px; }
        .sidebar { position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 20000; display: none; flex-direction: column; justify-content: center; align-items: center; }
        .sidebar.active { display: flex; animation: fadeIn 0.4s ease; }
        .sidebar-item { font-size: 22px; font-weight: 900; margin: 20px 0; color: #444; text-transform: uppercase; cursor: pointer; transition: 0.3s; }
        .sidebar-item:hover { color: var(--warrior-red); transform: scale(1.1); }

        /* --- CALENDAR GRID --- */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; margin-top: 20px; }
        .day-box { height: 38px; background: #0d0d0d; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 800; color: #333; position: relative; }
        .day-box.clean { background: #1DB954 !important; color: black !important; border: none; }
        .day-box.failed { background: var(--warrior-red) !important; color: white !important; border: none; }

        /* --- ARCHIVE & SHAME LABEL --- */
        .archive-month-card { background: #080808; border-radius: 20px; padding: 20px; margin-bottom: 25px; border: 1px solid #111; }
        .shame-label { display: none; position: absolute; bottom: 120%; left: 50%; transform: translateX(-50%); background: white; color: black; padding: 5px 12px; border-radius: 8px; font-size: 10px; font-weight: 900; white-space: nowrap; z-index: 100; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .day-box:hover .shame-label { display: block; }

        /* --- MODAL --- */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.99); z-index: 30000; justify-content: center; align-items: center; padding: 25px; }
        .modal-content { background: #0a0a0a; padding: 40px 30px; border-radius: 35px; border: 1px solid var(--warrior-red); width: 100%; max-width: 400px; }
        input { width: 100%; padding: 16px; background: #111; border: 1px solid #222; color: white; border-radius: 15px; text-align: center; margin: 20px 0; font-family: 'Inter'; }

        .analysis-view, .archive-view, .about-view { display: none; padding: 20px; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .trigger-item { margin-bottom: 15px; }
        .bar-bg { width: 100%; height: 8px; background: #111; border-radius: 10px; margin-top: 5px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--warrior-red); border-radius: 10px; transition: 1.2s cubic-bezier(0.1, 0.8, 0.2, 1); box-shadow: 0 0 10px var(--warrior-red); }
    </style>
</head>
<body onload="initWarrior()">

<div id="sidebar" class="sidebar">
    <div class="sidebar-item" onclick="switchView('dashboard')">Back to War</div>
    <div class="sidebar-item" onclick="switchView('analysis')">Current Analysis</div>
    <div class="sidebar-item" onclick="switchView('archive')">Monthly Archives</div>
    <div class="sidebar-item" onclick="switchView('about')">About</div>
    <div onclick="closeMenu()" style="margin-top: 40px; color: #ff3131;"><i class="fas fa-times-circle fa-2x"></i></div>
</div>

<div id="failModal" class="modal">
    <div class="modal-content">
        <div id="troll-msg" style="font-size: 22px; font-weight: 900; margin-bottom: 15px; line-height:1.3;">EWW.</div>
        <p style="color: #555; font-size: 11px; font-weight: 800; letter-spacing:1px;">PASTE THE URL OF YOUR DEFEAT</p>
        <input type="url" id="relapseURL" placeholder="https://shameful-site.com">
        <button class="action-btn victory" style="width:100%" onclick="processRelapse()">CONFESS & RESET</button>
        <p style="margin-top: 15px; color: #444; font-size: 10px;">DON'T LIE TO THE SYSTEM.</p>
    </div>
</div>

<div id="main-ui">
    <div class="header-nav">
        <div style="text-align: left;">
            <div style="font-size: 8px; color: #444; letter-spacing: 3px; font-weight: 900;">COMMANDER MODE</div>
            <div class="title" style="font-size: 22px;">WARRIOR 2026</div>
        </div>
        <div onclick="toggleMenu()" style="font-size: 24px; color: #222; padding: 5px;"><i class="fas fa-ellipsis-v"></i></div>
    </div>

    <!-- VIEW: DASHBOARD -->
    <div id="view-dashboard" class="container">
        <div class="glass-card">
            <div style="font-size: 10px; color: #555; font-weight: 800; letter-spacing: 2px;">CURRENT STREAK</div>
            <div id="streak-display" class="streak-num">0</div>
            <div style="font-size: 9px; color: #333; font-weight: 900; letter-spacing: 4px;">DAYS OF DOMINANCE</div>
        </div>

        <button class="panic-btn" onclick="emergency()"><i class="fas fa-skull"></i> PANIC BUTTON</button>

        <div class="btn-group">
            <button class="action-btn victory" onclick="logVictory()">I Stay Clean</button>
            <button class="action-btn relapse" onclick="openFailModal()">I Failed</button>
        </div>

        <div class="glass-card" style="margin-top: 30px;">
            <div style="font-size: 10px; color: #888; font-weight: 800; text-align: left; letter-spacing:1px;">BATTLE CALENDAR</div>
            <div class="calendar-grid" id="calendar"></div>
        </div>
    </div>

    <!-- VIEW: ANALYSIS -->
    <div id="view-analysis" class="analysis-view">
        <div id="perf-card-container"></div>
        <div class="glass-card">
            <h3 class="title" style="font-size: 16px; margin-bottom: 20px;">WEAKNESS RANKING</h3>
            <div id="analysis-list"></div>
        </div>
    </div>

    <!-- VIEW: ARCHIVE -->
    <div id="view-archive" class="archive-view">
        <h2 class="title" style="font-size: 22px; margin-bottom: 25px;">WARRIOR ARCHIVES</h2>
        <div id="archive-list"></div>
        <div id="grand-total-section"></div>
    </div>

    <!-- VIEW: ABOUT -->
    <div id="view-about" class="about-view">
        <div class="glass-card" style="text-align: left;">
            <h2 class="title" style="font-size: 22px; margin-bottom: 20px;">WARRIOR CODE</h2>
            <p style="color: #666; font-size: 14px; line-height: 1.8;">
                1. <b>HONESTY:</b> If you lie to the app, you lie to your soul.<br><br>
                2. <b>OWNERSHIP:</b> Your failures are yours. Your victory is earned.<br><br>
                3. <b>DATA:</b> We track your triggers to kill them. This phone is your server.<br><br>
                4. <b>CHAPTER 2:</b> We analyze the enemy. We destroy the weakness.
            </p>
        </div>
    </div>

    <div style="margin: 40px 0; font-size: 10px; color: #222; letter-spacing: 5px; font-weight: 900;">MADE BY TANAY Ã— EL</div>
</div>

<script>
    let WarriorState = {
        streak: parseInt(localStorage.getItem('w_streak_v6')) || 0,
        history: JSON.parse(localStorage.getItem('w_history_v6')) || {},
        triggers: JSON.parse(localStorage.getItem('w_triggers_v6')) || {}
    };

    const trolls = ["EWW. Shame of humanity.", "You call yourself a warrior? Pathetic.", "Loser detected. Uninstall me.", "Disgusting. Go back to hell.", "Ancestors are ashamed of you."];

    function toggleMenu() { document.getElementById('sidebar').classList.add('active'); }
    function closeMenu() { document.getElementById('sidebar').classList.remove('active'); }

    function switchView(view) {
        ['view-dashboard', 'view-analysis', 'view-archive', 'view-about'].forEach(v => document.getElementById(v).style.display = 'none');
        document.getElementById('view-' + view).style.display = 'block';
        if(view === 'analysis') renderAnalysis();
        if(view === 'archive') renderArchive();
        closeMenu();
    }

    function initWarrior() {
        renderCalendar();
        document.getElementById('streak-display').innerText = WarriorState.streak;
    }

    function logVictory() {
        const today = new Date().toDateString();
        if(WarriorState.history[today]) { alert("Battle already reported."); return; }
        WarriorState.history[today] = { status: 'clean' };
        WarriorState.streak++;
        saveAndReload();
        confetti({ particleCount: 150, spread: 70 });
    }

    function openFailModal() {
        document.getElementById('troll-msg').innerText = trolls[Math.floor(Math.random()*trolls.length)];
        document.getElementById('failModal').style.display = 'flex';
    }

    function processRelapse() {
        const url = document.getElementById('relapseURL').value;
        const today = new Date().toDateString();
        try {
            let domain = new URL(url).hostname.replace('www.', '');
            WarriorState.history[today] = { status: 'failed', site: domain };
            WarriorState.streak = 0;
            WarriorState.triggers[domain] = (WarriorState.triggers[domain] || 0) + 1;
            saveAndReload();
        } catch(e) { alert("Enter a valid URL, loser."); }
    }

    function renderAnalysis() {
        const container = document.getElementById('perf-card-container');
        const monthName = new Date().toLocaleString('default', { month: 'long' }).toUpperCase();
        let v = 0, d = 0;
        Object.values(WarriorState.history).forEach(x => { if(x.status === 'clean') v++; else d++; });

        container.innerHTML = `
            <div class="performance-card">
                <div class="perf-title">MONTHLY PERFORMANCE</div>
                <div class="perf-month">${monthName}</div>
                <div class="perf-stats">
                    <span style="color:#1DB954">${v} Victory</span> | <span style="color:#ff3131">${d} Defeat</span>
                </div>
                <div style="font-size:16px; font-weight:900; color:#ff3131;">RANK: ${d === 0 ? "Paragon âš¡" : d <= 2 ? "Adherent ðŸ§" : "Gay"}</div>
            </div>`;

        const list = document.getElementById('analysis-list');
        const sorted = Object.entries(WarriorState.triggers).sort((a,b) => b[1]-a[1]);
        list.innerHTML = sorted.map(([site, count]) => {
            const pct = (count / sorted[0][1]) * 100;
            return `<div class="trigger-item">
                <div style="display:flex; justify-content:space-between; font-size:10px; font-weight:800; color:#555;"><span>${site}</span><span>${count} TIMES</span></div>
                <div class="bar-bg"><div class="bar-fill" style="width:${pct}%"></div></div>
            </div>`;
        }).join('') || "<p style='color:#222; font-weight:800;'>NO DATA</p>";
    }

    function renderArchive() {
        const container = document.getElementById('archive-list');
        const sumBox = document.getElementById('grand-total-section');
        container.innerHTML = '';
        let tV = 0, tD = 0;
        const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        
        for(let m=0; m<=new Date().getMonth(); m++) {
            let mV = 0, mD = 0, hasData = false;
            let html = `<div class="archive-month-card"><h3 style="color:var(--warrior-red); font-size:12px; margin:0 0 15px 0; letter-spacing:1px;">${months[m].toUpperCase()} 2026</h3><div class="calendar-grid">`;
            const days = new Date(2026, m+1, 0).getDate();
            for(let i=1; i<=days; i++) {
                const dStr = new Date(2026, m, i).toDateString();
                const data = WarriorState.history[dStr];
                if(data) {
                    hasData = true;
                    if(data.status === 'clean') { mV++; tV++; } else { mD++; tD++; }
                    html += `<div class="day-box ${data.status}">${i}${data.site ? `<div class="shame-label">${data.site}</div>` : ''}</div>`;
                } else { html += `<div class="day-box">${i}</div>`; }
            }
            html += `</div><div style="margin-top:15px; font-size:10px; font-weight:800; color:#444;">V: ${mV} | D: ${mD}</div></div>`;
            if(hasData) container.innerHTML += html;
        }

        sumBox.innerHTML = `
            <div class="performance-card" style="background:var(--warrior-red); color:white;">
                <div class="perf-title" style="color:rgba(255,255,255,0.5)">GRAND TOTAL SUM</div>
                <div class="perf-stats" style="font-size:24px;">${tV} JAY | ${tD} PARAJAY</div>
                <div style="font-size:10px; font-weight:900;">CONSISTENCY: ${Math.round((tV/(tV+tD))*100) || 0}%</div>
            </div>`;
    }

    function renderCalendar() {
        const cal = document.getElementById('calendar'); cal.innerHTML = '';
        const today = new Date();
        const days = new Date(today.getFullYear(), today.getMonth()+1, 0).getDate();
        for(let i=1; i<=days; i++) {
            const dStr = new Date(today.getFullYear(), today.getMonth(), i).toDateString();
            const box = document.createElement('div');
            box.className = 'day-box ' + (WarriorState.history[dStr]?.status || '');
            box.innerText = i;
            cal.appendChild(box);
        }
    }

    function emergency() { alert("COMMAND: DO 50 PUSHUPS NOW! DON'T BE A SLAVE TO CHEAP PIXELS!"); }
    function saveAndReload() {
        localStorage.setItem('w_streak_v6', WarriorState.streak);
        localStorage.setItem('w_history_v6', JSON.stringify(WarriorState.history));
        localStorage.setItem('w_triggers_v6', JSON.stringify(WarriorState.triggers));
        location.reload();
    }
</script>
</body>
</html>
